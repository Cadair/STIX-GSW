<?xml version="1.0" encoding="UTF-8"?>
<!--
<header>
	<history>
		<change date="13-Feb-2017" author="Laszlo I. Etesi" affiliation="FHNW">
			<log>Initial release</log>
		</change>
	</history>
</header>
-->
<configuration application="stx_flight_software_simulator" type="user">
	<!--section name="global" alias="">
		<description>Global</description>
		<parameter name="debug" default="1b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>Turns debugging behaviour on or off.</description>
		</parameter>
		<parameter name="stop_on_error" default="0b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>If set to 1, the program will stop where an error has occurred. if set to 0, the program will return to %main.</description>
		</parameter>
		<parameter name="math_error_level" default="1b" valid="ppl_xml_value_in_array_test(X,[0b,1b,2b])" type="byte">
			<description>This parameter control how idl should react to math errors (over/underflows, divisions by zero, etc.). see "!EXCEPT" in "Error Handling System Variables" in the idl help.</description>
		</parameter>
		<parameter name="clock_duration" default="4d" valid="x gt 0" type="double">
			<description>This parameter is used to control the internal clock, i.e. the time bin size for reading data in from the Data Simulation</description>
		</parameter>
		<parameter name="plotting" default="0b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>This parameter controls the plotting output (on or off)</description>
		</parameter>
		<parameter name="background_energy_range" default="[20.,150.]"  valid="total(X gt 0) eq 2" type="float_array">
			<description>Specifies the default energy range for background counts. can be changed in scenario files.</description>
		</parameter>
	</section-->
	<section name="stx_fsw_module_rate_control_regime" alias="rcr">
		<description>Calculates the rate control regime states.</description>
		<parameter name="update_frequency" default="4" valid="X gt 0" type="int">
			<description>Update frequency of this module in seconds</description>
			<unit>seconds</unit>
		</parameter>
		<parameter name="l0" default="2*10L^3" valid="X gt 0" type="long">
			<description>Upper live time accumulator threshold for changing from C1 to C0, i.e. RCR1 to RCR0 (viz, for removing attenuator).</description>
			<value>350L</value>
		</parameter>
		<parameter name="l1" default="2*10L^5" valid="X gt 0" type="long">
			<description>Lower live time accumulator threshold for changing from C0 to C1, i.e. RCR0 to RCR1 (viz, for inserting the attenuator.)</description>
			<value>700L</value>
		</parameter>	
		<parameter name="l2" default="2*10L^5" valid="X gt 0" type="long">
			<description>Lower live tme acculator threshold for change RCR by increasing the effective detector area.</description>
			<value>1050L</value>
		</parameter>
		<parameter name="l3" default="1*10L^5" valid="X gt 0" type="long">
			<description>Upper live time accumulator threshold for changing RCR by reducing the effective detector area.</description>
			<value>1400L</value>
		</parameter>
		<parameter name="b0" default="2*10L^3" valid="X gt 0" type="long">
			<description>Upper limit on Ab (from background detector) for removing attenuator (max counts in 4s in 1 BKGD pixel for RCR1 to RCR0)</description>
		</parameter>
		<parameter name="rcr_tbl_filename" default="concat_dir( getenv('STX_CONF'), 'rcr_states.csv')" valid="file_exist(X)" type="string">
			<description>This is a file path to the rcr configuration lookup table.</description>
		</parameter>
	</section>
	<section name="stx_fsw_module_eventlist_to_archive_buffer" alias="eab">
		<description>This module constructs archive buffer entries using calibrated detector event list data.</description>
		<link>https://www.dropbox.com/s/cba0uzn93c7bu68/FSWaccumulationTiming20130618.docx</link>
		<parameter name="m_acc" default="byte([1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1])" valid="n_elements(X) eq 32" type="byte_array">
			<description>32-bit mask selecting detectors to be included in the accumulation.</description>
			<value>bytarr(32)+1b</value>
		</parameter>
		<parameter name="m_channel" default="bytarr(32)+1b" valid="n_elements(X) eq 32" type="byte_array">
			<description>32-bit mask selecting energy channels to be used in count n_min.</description>
		</parameter>
		<parameter name="n_min" default="8000L" valid="X gt 0" type="long">
			<description>Minimum number of counts in a time bin</description>
			<value>100000L</value>
		</parameter>
		<parameter name="t_max" default="110L" valid="X gt 0" type="long">
			<description>Maximum length of an accumulation time bin in units of 100ms.</description>
			<unit>100 milliseconds</unit>
			<value>40L</value>
		</parameter>
		<parameter name="t_min" default="0.1d" valid="X gt 0" type="double">
			<!-- maybe move this parameter to global -->
			<description>Minimum duration of an accumulation time bin in seconds.</description>
			<unit>seconds</unit>
			<value>4d</value>
		</parameter>
		<parameter name="t_increment" default="100ul" valid="X gt 0" type="ulong">
			<description>Extend the end of the time_bin by this (ms).</description>
			<unit>milliseconds</unit>
		</parameter>
		<parameter name="update_frequency" default="4" valid="X gt 0" type="int">
			<description>Update frequency of this module in seconds</description>
			<unit>seconds</unit>
		</parameter>
	</section>
</configuration>