<?xml version="1.0" encoding="UTF-8"?>
<!-- 
<header>
<history>
	<change date="XXX" author="Laszlo I. Etesi" affiliation="FHNW">
		<log>TBA</log>
	</change>
</history>
</header> 
-->
<configuration application="stx_data_simulation" type="system">
	<section name="global" alias="">
		<description>Global</description>
		<parameter name="debug" default="1b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>Turns debugging behaviour on or off.</description>
		</parameter>
		<parameter name="stop_on_error" default="0b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>If set to 1, the program will stop where an error has occurred. If set to 0, the program will return to %main.</description>
		</parameter>
		<parameter name="math_error_level" default="1b" valid="ppl_xml_value_in_array_test(X,[0b,1b,2b])" type="byte">
			<description>This parameter control how IDL should react to math errors (over/underflows, divisions by zero, etc.). See "!EXCEPT" in "Error Handling System Variables" in the IDL help.</description>
		</parameter>
		<parameter name="clock_duration" default="4d" valid="X gt 0" type="double">
			<description>This parameter is used to control the internal clock, i.e. the time bin size for reading data in from the Data Simulation</description>
		</parameter>
		<parameter name="plotting" default="0b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>This parameter controls the plotting output (on or off)</description>
		</parameter>
		<parameter name="background_energy_range" default="[20.,150.]"  valid="total(X gt 0) eq 2" type="float_array">
			<description>Specifies the default energy range for background counts. Can be changed in scenario files.</description>
		</parameter>
	</section>
	<section name="data_simulation" alias="ds">
		<description>Data Simulation configuration section</description>
		<parameter name="target_output_directory" default="curdir()" valid="file_exist(X)" type="string">
			<description>Output directory to which the data simulation results are written.</description>
		</parameter>
		<parameter name="attenuator_thickness" default="0.6" valid="X ge 0" type="float">
			<description>attenuator thickness in mm</description>
		</parameter>
		<parameter name="seed" default="0" valid="X ge 0" type="int">
			<description>the seed for the random number generator set 0 for !NULL (undefined)</description>
		</parameter>
	</section>
	<section name="simulated_data_reader" alias="sdr">
		<description>Data Simulation parameters for data reading.</description>
		<parameter name="apply_time_filter" default="1b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>If set to one, the detector event list is filtered using co-incidence filtering.</description>
		</parameter>
		<parameter name="T_L" default="2.7d-6 " valid="X ge 0" type="double">
		<description>the latency time for the detector coincidence time filtering</description>
		</parameter>
        <parameter name="T_R" default="11d-6" valid="X ge 0" type="double">
    		<description>The readout time for the detector coincidence time filtering. The T_Ignore period occurs at the end of every readout period.</description>
		</parameter>
        <parameter name="T_Ignore" default=" 0.72d-6" valid="X ge 0" type="double">
		  <description>The Ignore time for the detector coincidence time filtering. This shortens the veto time of the Readout time.  The effect is to lengthen the Latency time of any event within the final T_Ignore of any Readout time</description>
		</parameter>
		<parameter name="split_reading_threshold" default="3UL*10UL^8" valid="X gt 1000" type="ulong">
			<description>Specifies the threshold for split reading. If the reader expects more events than threshold the reading is devided into subblocks. For each subblock the RCR depending filtering is applyed and therefor the final result should fits into memory. </description>
		</parameter>
		<parameter name="split_reading_duration" default="0.2d" valid="X gt 0" type="double">
			<description>Specifies the time duration of a subblock read.</description>
		</parameter>
		<parameter name="rate_control_regime" default="0b" valid="ppl_xml_value_in_array_test(X,[0, 1, 2, 3, 4, 5, 6, 7, 8])" type="byte">
			<description>Specifies the default rate control regime when reading detector events.</description>
		</parameter>
		<parameter name="rcr_states_definition_file" default="concat_dir(getenv('STX_CONF'), 'rcr_states.csv')" valid="file_exist(X)" type="string">
			<description>Path to the rcr pixel states configuration file (CSV).</description>
		</parameter>
		<parameter name="attenuator_out" default="0b" valid="ppl_xml_value_is_boolean(X)" type="byte">
			<description>Specifies if the attenuator is allways out if true it will override the rcr condition.</description>
		</parameter>
    </section>
</configuration>
