[[global]]
; enable or disable debugging output and behaviour
debug = 1
simulation = 1

; file path to the subcollimator configuration file
; !!! this parameter will probably be moved later !!!
subc_file = concat_dir(getenv('STX_GRID'), 'stx_subc_params.txt')

[[stx_module_create_visibilities, alias = cv]]
; set front to rear grid separation in mm
f2r_sep = 550.d

[[stx_module_sum_over_pixels, alias = sp]]
sumcase = 0
      
[[stx_module_create_map, alias = img]]
algo = ppl_case('uvsmooth') ; [clean|bpmap|bproj|memnjit|uvsmooth|fwdfit]
detector_mask = make_array(30,value=1,/byte)
shift_map_center_to_bpmap_peak = 1
image_dim = 131 ;pixel
pixel = 1 ;arcsec

[[[algo = fwdfit]]]
; !!! changed from 1 to 0 because I made the algorithm robust against point sources by fixing the parameter range for eccentricity !!!
circle = 0 

[[[algo = clean]]]
niter = 100
gain = 0.05
beam_width = 4.0

[[[algo = uvsmooth]]]
testparam = 2

[[stx_module_coarse_flare_location, alias = cfl]]

[[stx_module_detector_simulation, alias = sim]]
;src_widget = 1
src_shape = 'point'
src_xcen = 0
src_ycen = 0
src_duration = 1l
src_flux = 1000l
src_distance = 1
src_fwhm_wd = 20
src_fwhm_ht = 20
src_phi = 0
src_loop_ht = 0
src_spectra = 0
bkg_flux = lonarr(32) + 10l
bkg_duration = 1

[[stx_module_determine_background, alias = bg]]

[[stx_module_interval_selection, alias = isa]]

[[stx_module_pixel_e_calibration, alias = pec]]

[[stx_module_pixel_phase_calibration, alias = ppc]]

[[stx_module_sum_over_time_energy, alias = ste]]

[[stx_module_locate_data_file, alias = ldf]]
data_location = 'd:\stix_data'

[[stx_module_read_data, alias = rd]]

[[stx_module_calibrate_visibilities, alias = clv]]
calibration_file='/somewhere/file.txt'
